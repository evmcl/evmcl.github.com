window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){arguments.callee=arguments.callee.caller;var a=[].slice.call(arguments);(typeof console.log==="object"?log.apply.call(console.log,console,a):console.log.apply(console,a))}};(function(e){function h(){}for(var g="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn".split(","),f;f=g.pop();){e[f]=e[f]||h}})((function(){try{console.log();return window.console}catch(a){return window.console={}}})());(function(a){a.fn.lightbox=function(h){var s=a.extend({},a.fn.lightbox.defaults,h);a(window).resize(v);return a(this).live("click",function(){e();r(this);return false});function e(){a("#overlay, #lightbox").remove();s.inprogress=false;if(s.jsonData&&s.jsonData.length>0){var z=s.jsonDataParser?s.jsonDataParser:a.fn.lightbox.parseJsonData;s.imageArray=[];s.imageArray=z(s.jsonData)}var w='<div id="outerImageContainer"><div id="imageContainer"><iframe id="lightboxIframe"></iframe><img id="lightboxImage" /><div id="hoverNav"><a href="javascript://" title="'+s.strings.prevLinkTitle+'" id="prevLink"></a><a href="javascript://" id="nextLink" title="'+s.strings.nextLinkTitle+'"></a></div><div id="loading"><a href="javascript://" id="loadingLink"><img src="'+s.fileLoadingImage+'"></a></div></div></div>';var y='<div id="imageDataContainer" class="clearfix"><div id="imageData"><div id="imageDetails"><span id="caption"></span><span id="numberDisplay"></span></div><div id="bottomNav">';if(s.displayHelp){y+='<span id="helpDisplay">'+s.strings.help+"</span>"}y+='<a href="javascript://" id="bottomNavClose" title="'+s.strings.closeTitle+'"><img src="'+s.fileBottomNavCloseImage+'"></a></div></div></div>';var x;if(s.navbarOnTop){x='<div id="overlay"></div><div id="lightbox">'+y+w+"</div>";a("body").append(x);a("#imageDataContainer").addClass("ontop")}else{x='<div id="overlay"></div><div id="lightbox">'+w+y+"</div>";a("body").append(x)}a("#overlay, #lightbox").click(function(){l()}).hide();a("#loadingLink, #bottomNavClose").click(function(){l();return false});a("#outerImageContainer").width(s.widthCurrent).height(s.heightCurrent);a("#imageDataContainer").width(s.widthCurrent);if(!s.imageClickClose){a("#lightboxImage").click(function(){return false});a("#hoverNav").click(function(){return false})}return true}function u(){var w=new Array(a(document).width(),a(document).height(),a(window).width(),a(window).height());return w}function g(){var y,w;if(self.pageYOffset){w=self.pageYOffset;y=self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){w=document.documentElement.scrollTop;y=document.documentElement.scrollLeft}else{if(document.body){w=document.body.scrollTop;y=document.body.scrollLeft}}}var x=new Array(y,w);return x}function n(y){var x=new Date();var w=null;do{w=new Date()}while(w-x<y)}function r(x){a("select, embed, object").hide();v();a("#overlay").hide().css({opacity:s.overlayOpacity}).fadeIn();imageNum=0;if(!s.jsonData){s.imageArray=[];if((!x.rel||(x.rel==""))&&!s.allSet){s.imageArray.push(new Array(x.href,s.displayTitle?x.title:""))}else{a("a").each(function(){if(this.href&&(this.rel==x.rel)){s.imageArray.push(new Array(this.href,s.displayTitle?this.title:""))}})}}if(s.imageArray.length>1){for(i=0;i<s.imageArray.length;i++){for(j=s.imageArray.length-1;j>i;j--){if(s.imageArray[i][0]==s.imageArray[j][0]){s.imageArray.splice(j,1)}}}while(s.imageArray[imageNum][0]!=x.href){imageNum++}}var w=g();var z=w[1]+(a(window).height()/10);var y=w[0];a("#lightbox").css({top:z+"px",left:y+"px"}).show();if(!s.slideNavBar){a("#imageData").hide()}t(imageNum)}function t(w){if(s.inprogress==false){s.inprogress=true;s.activeImage=w;a("#loading").show();a("#lightboxImage, #hoverNav, #prevLink, #nextLink").hide();if(s.slideNavBar){a("#imageDataContainer").hide();a("#imageData").hide()}k()}}function k(){imgPreloader=new Image();imgPreloader.onload=function(){var B=imgPreloader.width;
var w=imgPreloader.height;if(s.scaleImages){B=parseInt(s.xScale*B);w=parseInt(s.yScale*w)}if(s.fitToScreen){var y=u();var A;var x=y[2]-2*s.borderSize;var C=y[3]-200;var z=x/C;var D=imgPreloader.width/imgPreloader.height;if((imgPreloader.height>C)||(imgPreloader.width>x)){if(z>D){B=parseInt((C/imgPreloader.height)*imgPreloader.width);w=C}else{w=parseInt((x/imgPreloader.width)*imgPreloader.height);B=x}}}a("#lightboxImage").attr("src",s.imageArray[s.activeImage][0]).width(B).height(w);m(B,w)};imgPreloader.src=s.imageArray[s.activeImage][0]}function l(){o();a("#lightbox").hide();a("#overlay").fadeOut();a("select, object, embed").show()}function f(){if(s.loopImages&&s.imageArray.length>1){preloadNextImage=new Image();preloadNextImage.src=s.imageArray[(s.activeImage==(s.imageArray.length-1))?0:s.activeImage+1][0];preloadPrevImage=new Image();preloadPrevImage.src=s.imageArray[(s.activeImage==0)?(s.imageArray.length-1):s.activeImage-1][0]}else{if((s.imageArray.length-1)>s.activeImage){preloadNextImage=new Image();preloadNextImage.src=s.imageArray[s.activeImage+1][0]}if(s.activeImage>0){preloadPrevImage=new Image();preloadPrevImage.src=s.imageArray[s.activeImage-1][0]}}}function m(z,x){s.widthCurrent=a("#outerImageContainer").outerWidth();s.heightCurrent=a("#outerImageContainer").outerHeight();var w=Math.max(350,z+(s.borderSize*2));var y=(x+(s.borderSize*2));wDiff=s.widthCurrent-w;hDiff=s.heightCurrent-y;a("#imageDataContainer").animate({width:w},s.resizeSpeed,"linear");a("#outerImageContainer").animate({width:w},s.resizeSpeed,"linear",function(){a("#outerImageContainer").animate({height:y},s.resizeSpeed,"linear",function(){d()})});if((hDiff==0)&&(wDiff==0)){if(jQuery.browser.msie){n(250)}else{n(100)}}a("#prevLink").height(x);a("#nextLink").height(x)}function d(){a("#loading").hide();a("#lightboxImage").fadeIn("fast");c();f();s.inprogress=false}function c(){a("#numberDisplay").html("");if(s.imageArray[s.activeImage][1]){a("#caption").html(s.imageArray[s.activeImage][1]).show()}if(s.imageArray.length>1){var w;w=s.strings.image+(s.activeImage+1)+s.strings.of+s.imageArray.length;if(s.displayDownloadLink){w+="<a href='"+s.imageArray[s.activeImage][0]+"'>"+s.strings.download+"</a>"}if(!s.disableNavbarLinks){if((s.activeImage)>0||s.loopImages){w='<a title="'+s.strings.prevLinkTitle+'" href="#" id="prevLinkText">'+s.strings.prevLinkText+"</a>"+w}if(((s.activeImage+1)<s.imageArray.length)||s.loopImages){w+='<a title="'+s.strings.nextLinkTitle+'" href="#" id="nextLinkText">'+s.strings.nextLinkText+"</a>"}}a("#numberDisplay").html(w).show()}if(s.slideNavBar){a("#imageData").slideDown(s.navBarSlideSpeed)}else{a("#imageData").show()}v();p()}function v(){a("#overlay").css({width:a(document).width(),height:a(document).height()})}function p(){if(s.imageArray.length>1){a("#hoverNav").show();if(s.loopImages){a("#prevLink,#prevLinkText").show().click(function(){t((s.activeImage==0)?(s.imageArray.length-1):s.activeImage-1);return false});a("#nextLink,#nextLinkText").show().click(function(){t((s.activeImage==(s.imageArray.length-1))?0:s.activeImage+1);return false})}else{if(s.activeImage!=0){a("#prevLink,#prevLinkText").show().click(function(){t(s.activeImage-1);return false})}if(s.activeImage!=(s.imageArray.length-1)){a("#nextLink,#nextLinkText").show().click(function(){t(s.activeImage+1);return false})}}b()}}function q(z){var A=z.data.opts;var w=z.keyCode;var x=27;var y=String.fromCharCode(w).toLowerCase();if((y=="x")||(y=="o")||(y=="c")||(w==x)){l()}else{if((y=="p")||(w==37)){if(A.loopImages){o();t((A.activeImage==0)?(A.imageArray.length-1):A.activeImage-1)}else{if(A.activeImage!=0){o();t(A.activeImage-1)}}}else{if((y=="n")||(w==39)){if(s.loopImages){o();t((A.activeImage==(A.imageArray.length-1))?0:A.activeImage+1)}else{if(A.activeImage!=(A.imageArray.length-1)){o();t(A.activeImage+1)}}}}}}function b(){a(document).bind("keydown",{opts:s},q)}function o(){a(document).unbind("keydown")}};a.fn.lightbox.parseJsonData=function(c){var b=[];a.each(c,function(){b.push(new Array(this.url,this.title))
});return b};a.fn.lightbox.defaults={allSet:false,fileLoadingImage:"images/loading.gif",fileBottomNavCloseImage:"images/closelabel.gif",overlayOpacity:0.6,borderSize:10,imageArray:new Array,activeImage:null,inprogress:false,resizeSpeed:350,widthCurrent:250,heightCurrent:250,scaleImages:false,xScale:1,yScale:1,displayTitle:true,navbarOnTop:false,displayDownloadLink:false,slideNavBar:false,navBarSlideSpeed:350,displayHelp:false,strings:{help:" \u2190 / P - previous image\u00a0\u00a0\u00a0\u00a0\u2192 / N - next image\u00a0\u00a0\u00a0\u00a0ESC / X - close image gallery",prevLinkTitle:"previous image",nextLinkTitle:"next image",prevLinkText:"&laquo; Previous",nextLinkText:"Next &raquo;",closeTitle:"close image gallery",image:"Image ",of:" of ",download:"Download"},fitToScreen:false,disableNavbarLinks:false,loopImages:false,imageClickClose:true,jsonData:null,jsonDataParser:null}})(jQuery);$(document).ready(function(){$("a[href^=http]").attr("target","_blank");$("a.lightbox").lightbox({fileLoadingImage:"/img/site/loading.gif",fileBottomNavCloseImage:"/img/site/closelabel.png"})});